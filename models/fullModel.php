<?phpclass fullModel extends Model {    public function __construct() {        parent::__construct();    }    public function GetCheckoutDemo($demo) {        $sql = "SELECT * FROM tb_tracks WHERE `demo` = :demo LIMIT 1";        $q = $this->_db->prepare($sql);        $q->execute(array(':demo' => $demo));        $resp = $q->fetchAll(PDO::FETCH_ASSOC);        return $resp;    }    public function Carrito($datoe) {        $carrito = Session::get("carrito");        ?>        <div id="carrito-results">            <div class="left" style="margin-bottom: 20px;">                <?php                $data = $carrito->cart;                if ($data > 0 || !empty($data)) {                    for ($i = 1; $i <= count($data); $i++):                        $count = $i - 1;                        ?>                        <?php $dato = $this->GetCheckoutDemo($data[$count]->MP3Demo) ?>                        <?php//                        Functions::Print_pree($dato);                        if ($data[$count]->MP3Demo_pichado == "") {                            $play = $data[$count]->MP3Demo;                        } else {                            $play = $data[$count]->MP3Demo_pichado;                        }                        $tracks = substr($data[$count]->MP3Demo, 0, -4);//                        echo "<pre>";//                        print_r($dato);//                        echo "</pre>";                        ?>                        <div class="carrito-fila">                            <div class="carrito-columna">                                <span data-toggle="tooltip" data-placement="bottom" title="<?= $dato[0]['name'] ?> - <?= $dato[0]['artist_name'] ?>">                                    <span class="carrito-columna_hor play-style">                                        <i data-playCarrito="true" data-pitch="<?= $data[$count]->MP3Demo_pichado; ?>" data-idcart="<?= $tracks; ?>" onclick="play('<?php echo $play; ?>', this);" class="play fa fa-play-circle-o fa-2x"></i>                                    </span>                                    <span class="carrito-columna_hor"><?= $dato[0]['name'] ?> - </span>                                    <span class="carrito-columna_hor"><?= $dato[0]['artist_name'] ?></span>                                </span>                            </div>                            <div class="carrito-columna">                                <span class="carrito-columna_hor"><?= strtoupper($this->GetTypeText($data[$count]->tipo)); ?></span>                                <div class="desplegablesTipos">                                    <?php                                    $cancion = mysql_escape_string($dato[0]['name']);                                    $artist = $dato[0]['artist_name'];                                    $tipo = $dato[0]['tipo'];                                    $tipos = $this->getContentTypeFull($cancion, $artist, $tipo);                                    $contar = count($tipos);                                    if ($contar == 0) {                                        ?>                                        <?php                                    } else {                                        foreach ($tipos as $key => $value):                                            ?>                                            <span data-demomp3="<?= $value['tipo']; ?>"><?= strtoupper($this->GetTypeText($value['tipo'])); ?></span>                                            <?php                                        endforeach;                                    }                                    ?>                                </div>                            </div>                            <div class="carrito-columna"><!--                                <span class="carrito-columna_hor">PITCH:</span>                                <span class="carrito-columna_hor">                                    <select>                                        <?php                                        for ($j = -4; $j <= 4; $j++) {                                            ?>                                            <option value="<?= $j ?>" <?php                                            if ($data[$count]->pitch == $j) {                                                echo "selected";                                            }                                            ?>><?= $j; ?></option>                                                    <?php                                                }                                                ?>                                    </select>                                </span>-->                                <div class="desplegablesTipos">                                    <?php                                    for ($x = 0; $x < count($tipos); $x++) {                                        ?><!--                                        <span>PITCH: </span>                                        <span class="select-pitch">                                            <select data-fila="<?= $x ?>">                                                <?php                                                for ($j = -4; $j <= 4; $j++) {                                                    ?>                                                    <option value="<?= $j ?>" <?php                                                    if ($data[$count]->version[$x]->pitch == $j) {                                                        echo "selected";                                                    }                                                    ?>><?= $j; ?></option>                                                            <?php                                                        }                                                        ?>                                            </select>                                        </span>-->                                        <?php                                    }                                    ?>                                </div>                            </div>                            <div class="carrito-columna">                                <span class="carrito-columna_hor">                                    <?php                                    $versionesPrecio = $data[$count]->version;                                    $precios = 0;                                    foreach ($versionesPrecio as $key => $value) {                                        $precios += $value->precio . "|";                                    }                                    ?>                                    <?= $precios + $data[$count]->precio . "€" ?>                                </span>                                <div class="desplegablesTipos">                                    <?php                                    for ($x = 0; $x < count($tipos); $x++) {                                        ?>                                        <span class="precio-tipo"><?= '0.99€' ?>                                        </span><br>                                        <?php                                    }                                    ?>                                </div>                            </div>                            <div class="carrito-columna">                                <div style="width: 98px;height: 40px;">                                    <a href = "javascript:void(0);" class = "botton-offer">                                        <span class = "botton-offer_text">See offers</span>                                    </a>                                </div>                                <div class="desplegablesTipos" style="text-align: left;">                                    <div style="line-height: 39px;" class="list-carrito">                                        <?php                                        if ($contar == 0) {                                            ?>                                            <span class="error">No offers <i class="fa fa-exclamation-triangle"></i></span>                                            <?php                                        } else {                                            for ($n = 0; $n < count($tipos); $n++) {                                                $version = $data[$count]->version;                                                ?>                                                <div>                                                    <?php                                                    $encontrado = false;                                                    $valors = 0;//                                                echo "<pre>";//                                                print_r($data);//                                                echo "</pre>";                                                    if (empty($version[$n])) {                                                        ?>                                                        <span data-mp3="<?= $tipos[$n]['demo']; ?>" data-fila="<?= $n ?>" class="get-offer" style="color: #FF7626;font-weight: bold;margin-left: 11px;font-size: 10px;">                                                            GET OFFER                                                        </span>                                                        <span data-namec="<?= $n; ?>" data-fila="<?= $n ?>" style="color: #FF7600;margin-left: 14px;visibility: hidden" class="fa fa-trash"></span>                                                        <?php                                                    } else {                                                        if (array_key_exists($n, $version)) {                                                            ?>                                                            <span data-mp3="<?= $tipos[$n]['demo']; ?>" data-fila="<?= $n ?>" class="get-offer" style="color: #FF7626;font-weight: bold;margin-left: 11px;font-size: 10px;">                                                                <span class='added-cart'>ADDED</span>                                                            </span>                                                            <span data-namec="<?= $n; ?>" data-fila="<?= $n ?>" style="color: #FF7600;margin-left: 14px;visibility: visible" class="remove-version fa fa-trash"></span>                                                            <?php                                                        } else {                                                            ?>                                                            <span data-mp3="<?= $tipos[$n]['demo']; ?>" data-fila="<?= $n ?>" class="get-offer" style="color: #FF7626;font-weight: bold;margin-left: 11px;font-size: 10px;">                                                                GET OFFER                                                            </span>                                                            <span data-namec="<?= $n; ?>" data-fila="<?= $n ?>" style="color: #FF7600;margin-left: 14px;visibility: hidden" class="fa fa-trash"></span>                                                            <?php                                                        }                                                    }//                                                foreach ($data[$count]->version as $keys => $valor) {//                                                    //                                                }                                                    ?>                                                </div>                                                <?php                                            }                                        }                                        ?>                                    </div>                                </div>                            </div>                            <div class="carrito-columna">                                <i class = "desplegar-shop fa fa-caret-right fa-2x"></i>                            </div>                        </div>                        <!--<div class="hr"></div>-->                    <?php endfor; ?>                </div>                <div class="right">                    <div class="carrito-order">                        <!--                    <div class="carrito-order-header">                                                <span class="carrito-order-header_title">                                                    YOUR SUPER ORDER                                                </span>                                            </div>-->                        <div class="carrito-order-body">                            <?php                            $total = 0;                            for ($i = 1; $i <= count($data); $i++):                                $count = $i - 1;                                ?>                                <?php $dato = $this->GetCheckoutDemo($data[$count]->MP3Demo) ?>                                <div class="carrito-fila">                                    <div class="carrito-columna">                                        <span class="carrito-columna_hor"><b><?= $i ?>.</b></span>                                        <span class="carrito-columna_hor" data-toggle="tooltip" data-placement="bottom" title="<?= $dato[0]['name'] ?> - <?= $dato[0]['artist_name'] ?>"><?= $dato[0]['name']; ?></span>                                    </div>                                    <div class="carrito-columna">                                        <?php                                        $versionesPrecio = $data[$count]->version;                                        $precios2 = 0;                                        foreach ($versionesPrecio as $key => $value) {                                            $precios2 += $value->precio . "|";                                        }                                        ?>                                        <span><?= $precios2 + $dato[0]['precio'] . "€"; ?></span>                                        <?php $total +=$data[$count]->precio + $precios2; ?>                                    </div>                                    <div class="carrito-columna">                                        <span data-id="<?= $count; ?>" class="remove-cart"><i class="fa fa-trash" style="font-size: 12px;"></i></span>                                    </div>                                </div>                            <?php endfor; ?>                        </div>                        <div class="hr azul"></div>                        <div class="carrito-order-footer">                        </div>                    </div>                    <div class="carrito-orden-extern">                        <div class="carrito-orden-extern_total">                            <span>TOTAL:</span>                            <span><?= number_format($total, 2) . "€"; ?></span>                        </div>                        <div class="carrito-orden-extern_paypal">                            <div class="input-radio">                                <input id="radio1" name="informed" checked class="" type="radio">                            </div>                            <div class="img-paypal">                                <img src="<?= BASE_URL_IMG ?>paypal.png">                            </div>                        </div>                        <div class="carrito-order-extern_checkout">                            <?php if (!Session::get("autenticado")): ?>                                <a data-toggle="modal" data-target="#login" data-whatever="@getbootstrap"><img src="<?= BASE_URL_IMG ?>checkout_inactive.png"></a>                            <?php else: ?>                                <?php                                $carrito = $this->GetCarritoSession();                                $precio = $this->PrecioTotalCarrito($carrito);                                $count_cart = count($carrito->cart);                                if ($count_cart > 0):                                    ?>                                    <!--<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">-->                                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="checkout-paypal">                                        <input type="hidden" name="shipping" value="0">                                        <input type="hidden" name="cbt" value="Presione aquí para volver a www.superbackings.com >>">                                         <input type="hidden" name="cmd" value="_xclick">                                        <input type="hidden" name="rm" value="2">                                         <input type="hidden" name="bn" value="Superbackings">                                        <input type="hidden" name="item_name" value="Backing Tracks download">                                        <input type="hidden" name="item_number" value="<?= $datoe?>">                                         <input type="hidden" name="business" value="paypal@superbackings.com">                                        <input type="hidden" name="return" value="https://www.superbackings.com/success/">                                         <input type="hidden" name="cancel_return" value="https://www.superbackings.com/success/error/">                                        <input type="hidden" name="no_shipping" value="0">                                         <input type="hidden" name="no_note" value="0">                                        <input type="hidden" name="currency_code" value="EUR">                                        <input type="hidden" name="amount" value="<?= $precio; ?>">                                        <input style="width: 158px;" type="image" width="158px" src="<?= BASE_URL_IMG ?>checkout_active.png" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">                                    </form>                                    <!--<a href="<?= BASE_URL; ?>checkout-paypal/"><img src="<?= BASE_URL_IMG ?>checkout_active.png"></a>-->                                    <?php                                else:                                    ?>                                    <!--<a onclick="alert('0 articulos en la cesta');"><img src="<?= BASE_URL_IMG ?>checkout_inactive.png"></a>-->                                <?php                                endif;                            endif;                        }else {                            ?>                            <a href="<?= BASE_URL . "full-song-list/" ?>"><img src="<?= BASE_URL_IMG . "emptycart.jpg" ?>"></a>                            <?php                        }                        ?>                    </div>                </div>            </div>        </div>        <?php    }    public function getCanciones($limit = null) {        if (is_numeric($limit)) {            $limit = "LIMIT " . $limit;        }        $listado = $this->_db->query("SELECT * FROM tb_tracks $limit");        return $listado->fetchall();    }    public function Prueba() {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE tipo = '' ORDER BY fecha_alta DESC LIMIT 20");        $result = $listado->fetchall(PDO::FETCH_ASSOC);        for ($i = 0; $i < count($result); $i++) {            echo $result[$i]['name'] . "<br>";            $name = $result[$i]['name'];            $artist = $result[$i]['artist_name'];            $sql = "SELECT * FROM tb_tracks WHERE `name` = :name AND `artist_name` = :artist";            $q = $this->_db->prepare($sql);            $q->execute(array(':name' => $name, ':artist' => $artist));            $resp = $q->fetchAll();            for ($x = 0; $x < count($resp); $x++) {                echo $resp[$x]['tipo'] . "|";            }            echo "<hr>";        }    }    public function GetHome($limit = null) {        if (is_numeric($limit)) {            $limit = "LIMIT " . $limit;        }        $listado = $this->_db->query("SELECT arr_tracks FROM tb_ventas WHERE estado='PAGADO' and arr_tracks !=' ' $limit");        $lista = $listado->fetchall(PDO::FETCH_ASSOC);        $arreglo = array();        for ($i = 0; $i < count($lista); $i++) {            $listar = $lista[$i]['arr_tracks'];            if (empty($listar)) {//                break;            }            $exp = explode(",", $lista[$i]['arr_tracks']);            for ($x = 0; $x < count($exp); $x++) {                array_push($arreglo, $exp[$x]);            }        }//        /* CONTAMOS ELEMENTOS IGUALES */        $elem = $this->repeatedElements($arreglo, true);        $this->aasort($elem, "count");        print_r($elem);//        print_r($arreglo);//        $reverse = array_reverse($valores, true);//        unset($reverse[0]);//        $wheres;//        for ($i = 0; $i < 20; $i++) {//            $wheres .= $reverse[$i]['value'] . ",";//        }//        echo $wheres;//        echo $wheres;//        echo $re;//        return $exp;//        return $lista;//        return $re;    }    /**     * Select Artista, track y tipo LIKE     * @param type $name     * @return type     */    public function getArtistasAbcd($name) {        $listado = $this->_db->query("SELECT artist_name,name,tipo FROM tb_tracks WHERE artist_name LIKE '$name%' and tipo='' ORDER BY artist_name ASC");        return $listado->fetchall();    }    public function GetTabla($resultado = null, $LIMIT = 20, $data = null) {        if ($resultado == null) {            $resultado = $this->getCanciones($LIMIT);        } else        if ($resultado == "all") {            $resultado = $this->getCanciones();        }        $carrito = Session::get("carrito");        for ($i = 0; $i < count($resultado); $i++) {            $datosCarrito = array("id" => $resultado[$i]['id'], "precio" => $resultado[$i]['precio']);            $datosCarrito = json_encode($datosCarrito);            if ($data) {                $datetime1 = date_create($resultado[$i]['fecha_alta']);                $datetime2 = date_create(date("Y-m-d H:i:s"));                $interval = date_diff($datetime1, $datetime2);                $dias = $interval->format('%R%a');                if ($dias < 7) {                    $data = "<span class='etiqueta'>NEW</span>";                } else {                    $data = null;                }            }            if ($tipo != null) {                $tipo = "FV";            } else {//                $tipo = $this->getType($value['tipo'], true);            }            $nameUrl = strtolower(str_replace(" ", "-", $resultado[$i]['name']));            $artistUrl = strtolower(str_replace(" ", "-", $resultado[$i]['artist_name']));            $track = substr($resultado[$i]['demo'], 0, -4);//            $track = substr($track, 0, -1);            /* DATOS VERSION */            $sql = "SELECT * FROM tb_tracks WHERE `name` = :name AND `artist_name` = :artist ORDER BY tipo ASC";            $name = $resultado[$i]['name'];            $artist = $resultado[$i]['artist_name'];            $q = $this->_db->prepare($sql);            $q->execute(array(':name' => $name, ':artist' => $artist));            $resp = $q->fetchAll();            $versionesArray = array();            for ($x = 0; $x < count($resp); $x++) :                $tipo = $resp[$x]['tipo'];                $demo = $resp[$x]['demo'];                $versionesArray[] = $demo;            endfor;            ?>            <?php            $dato_a_buscar = $resultado[$i]['demo'];            $datosResult = false;//                    print_r($versionesArray);            foreach ($carrito->cart as $key => $value) {                if ($value->MP3Demo == $dato_a_buscar) {                    $datosResult = true;                    break;                }                if (array_search($value->MP3Demo, $versionesArray)) {                    $datosResult = true;                    break;                }                $datosResult = false;            }            ?>            <tr <?php if ($datosResult) echo "class='active-added'"; ?>>                <td><i data-track="<?= $track; ?>" onclick="play('<?php echo $resultado[$i]['demo']; ?>', this);" class="play fa fa-play-circle fa-2x"></i></td>                <td>                    <a href="<?php echo BASE_URL . "search/query/" . $nameUrl . "/"; ?>"><?= $resultado[$i]['name']; ?><?= $data; ?></a>                    <div class='loader'></div>                </td>                <td>                    <a href="<?php echo BASE_URL . "artist/query/$artistUrl/"; ?>"><?= $resultado[$i]['artist_name']; ?></a>                    <div class="loader-status"></div>                </td>                <td style="vertical-align: central;">                    <?php if (!$datosResult): ?>                        <select class="selectTipo">                            <?php                            $sql = "SELECT * FROM tb_tracks WHERE `name` = :name AND `artist_name` = :artist ORDER BY tipo ASC";                            $name = $resultado[$i]['name'];                            $artist = $resultado[$i]['artist_name'];                            $q = $this->_db->prepare($sql);                            $q->execute(array(':name' => $name, ':artist' => $artist));                            $resp = $q->fetchAll();                            for ($x = 0; $x < count($resp); $x++) :                                $tipo = $resp[$x]['tipo'];                                $demo = $resp[$x]['demo'];                                if ($tipo == "")                                    echo "<option value='$demo'>FV</option>";                                if ($tipo == "GT")                                    echo "<option value='$demo'>GT</option>";                                if ($tipo == "WV")                                    echo "<option value='$demo'>WV</option>";                                if ($tipo == "BS")                                    echo "<option value='$demo'>BS</option>";                                ?>                                <?php                            endfor;                            ?>                        </select>                    <?php endif; ?>                    <div class="pitch-info">                        <div class='pitch-info-div'><span>Pitch</span><i class='fa fa-arrow-right'></i></div>                    </div>                </td>                <td>                    <?php                    if ($datosResult) {                        ?>                        <a href = "javascript:void(0);" class = "buybtn addCart cart-blocked" style="padding: 0;" data-precio="<?= $resultado[$i]['precio']; ?>" data-carritoid='<?= $resultado[$i]['id']; ?>' data-carrito = '<?= $datosCarrito; ?>'>                            ADDED TO CART                        </a>                    <?php } else {                        ?>                        <a href = "javascript:void(0);" class = "buybtn" data-precio="<?= $resultado[$i]['precio']; ?>" data-carritoid='<?= $resultado[$i]['id']; ?>' data-carrito = '<?= $datosCarrito; ?>'>                            <span class = "buybtn-text">Cart</span>                            <!--<span class = "buybtn-hidden-text">3.99 &euro;                            </span> -->                            <span class = "buybtn-image buybtn-image-text"><span><?= $resultado[$i]['precio'] . "€" ?></span></span>                        </a>                        <?php                    }                    ?>                    <div class="desplegableTipos">                        <div class='pitch'>                            <div class='pitch-minus'><i class='fa fa-minus-circle'></i></div>                            <div class='pitch-plus'><i class='fa fa-plus-circle'></i></div>                            <div class='pitch-result'>0</div>                        </div>                    </div>                </td>                <td>                    <?php if (!$datosResult): ?>                        <i class = "desplegar fa fa-caret-right fa-2x"></i>                    <?php endif; ?>                </td>            </tr>            <?php        }    }    public function GetLatest20tracks() {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE tipo = '' ORDER BY fecha_alta DESC LIMIT 20");        $result = $listado->fetchall(PDO::FETCH_ASSOC);        $this->GetTablaDate($result, 20, false, true);    }    public function GetArtist($artista) {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE artist_name ='{$artista}' and  tipo = '' ORDER by name ASC");        $result = $listado->fetchall(PDO::FETCH_ASSOC);        $this->GetTablaDate($result, 20, false, true);    }    public function ipReal() {//Ip del visitante        if ($_SERVER['REMOTE_ADDR'] == '::1')            $ipuser = '';        else            $ipuser = $_SERVER['REMOTE_ADDR'];        $geoPlugin_array = unserialize(file_get_contents('http://www.geoplugin.net/php.gp?ip=' . $ipuser));        return array(            "cont" => $geoPlugin_array['geoplugin_continentCode'],            "pais" => $geoPlugin_array['geoplugin_countryName'],            "moneda" => $geoPlugin_array['geoplugin_currencyCode']        );    }    public function ViewMoneda($ip, $precio) {        if (($ip['moneda'] == "EUR")):            return $precio . "€";        elseif ($ip['moneda'] == "GBP"):            return "£$precio";        else:            return "$$precio";        endif;    }    public function GetTablaDate($resultado = null, $LIMIT = 20, $data = null, $tipo = null) {        $carrito = Session::get("carrito");//        Functions::Print_pree($carrito);        for ($i = 0; $i < count($resultado); $i++) {            $datosCarrito = array("id" => $resultado[$i]['id'], "precio" => $resultado[$i]['precio']);            $datosCarrito = json_encode($datosCarrito);            if ($data) {                $datetime1 = date_create($resultado[$i]['fecha_alta']);                $datetime2 = date_create(date("Y-m-d H:i:s"));                $interval = date_diff($datetime1, $datetime2);                $dias = $interval->format('%R%a');                if ($dias > 90) {                    $data = "<span class='etiqueta'>NEW</span>";                } else {                    $data = null;                }            }            if ($tipo != null) {                $tipo = "FV";            } else {//                $tipo = $this->getType($value['tipo'], true);            }            $names = strtolower(str_replace(" ", "-", $resultado[$i]['name']));            $artists = strtolower(str_replace(" ", "-", $resultado[$i]['artist_name']));            $track = substr($resultado[$i]['demo'], 0, -4);//            $track = substr($track, 0, -1);            /* DATOS VERSION */            $sql = "SELECT * FROM tb_tracks WHERE `name` = :name AND `artist_name` = :artist ORDER BY tipo ASC";            $name = $resultado[$i]['name'];            $artist = $resultado[$i]['artist_name'];            $q = $this->_db->prepare($sql);            $q->execute(array(':name' => $name, ':artist' => $artist));            $resp = $q->fetchAll();            $versionesArray = array();            for ($x = 0; $x < count($resp); $x++) :                $tipo = $resp[$x]['tipo'];                $demo = $resp[$x]['demo'];                $versionesArray[] = $demo;            endfor;            ?>            <?php            $dato_a_buscar = $resultado[$i]['demo'];            $datosResult = false;//                    print_r($versionesArray);            foreach ($carrito->cart as $key => $value) {                if ($value->MP3Demo == $dato_a_buscar) {                    $datosResult = true;                    break;                }                if (array_search($value->MP3Demo, $versionesArray)) {                    $datosResult = true;                    break;                }                $datosResult = false;            }            ?>            <tr <?php if ($datosResult) echo "class='active-added'"; ?>>                <td><i data-track="<?= $track; ?>" onclick="play('<?php echo $resultado[$i]['demo']; ?>', this);" class="play fa fa-play-circle fa-2x"></i></td>                <td>                    <a href="<?= BASE_URL . "search/query/$names/" ?>"><?= $resultado[$i]['name']; ?><?= $data; ?></a>                    <div class='loader'></div>                </td>                <td>                    <a href="<?= BASE_URL . "artist/query/$artists/" ?>"><?= $resultado[$i]['artist_name']; ?></a>                    <div class="loader-status"></div>                </td>                <td style="vertical-align: central;">                    <?php if (!$datosResult): ?>                        <select class="selectTipo">                            <?php                            for ($x = 0; $x < count($resp); $x++) :                                $tipo = $resp[$x]['tipo'];                                $demo = $resp[$x]['demo'];                                $versionesArray[] = $demo;                                if ($tipo == "")                                    echo "<option value='$demo'>FV</option>";                                if ($tipo == "GT")                                    echo "<option value='$demo'>GT</option>";                                if ($tipo == "WV")                                    echo "<option value='$demo'>WV</option>";                                if ($tipo == "BS")                                    echo "<option value='$demo'>BS</option>";                                ?>                                <?php                            endfor;                            ?>                        </select>                    <?php endif; ?>                    <div class="pitch-info">                        <div class='pitch-info-div'><span>Pitch</span><i class='fa fa-arrow-right'></i></div>                    </div>                </td>                <td>                    <?php                    if ($datosResult) {                        ?>                        <a href = "javascript:void(0);" class = "buybtn addCart cart-blocked" data-precio="<?= $resultado[$i]['precio']; ?>" data-carritoid='<?= $resultado[$i]['id']; ?>' data-carrito = '<?= $datosCarrito; ?>'>                            ADDED                        </a>                    <?php } else {                        ?>                        <a href = "javascript:void(0);" class = "buybtn" data-precio="<?= $resultado[$i]['precio']; ?>" data-carritoid='<?= $resultado[$i]['id']; ?>' data-carrito = '<?= $datosCarrito; ?>'>                            <span class = "buybtn-text">Cart</span>                            <!--<span class = "buybtn-hidden-text">3.99 &euro;                            </span> -->                            <span class = "buybtn-image buybtn-image-text"><span><?= $resultado[$i]['precio'] . "€"; ?></span></span>                        </a>                        <?php                    }                    ?>                    <div class="desplegableTipos">                        <div class='pitch'>                            <div class='pitch-minus'><i class='fa fa-minus-circle'></i></div>                            <div class='pitch-plus'><i class='fa fa-plus-circle'></i></div>                            <div class='pitch-result'>0</div>                        </div>                    </div>                </td>                <td>                    <?php if (!$datosResult): ?>                        <i class = "desplegar fa fa-caret-right fa-2x"></i>                    <?php endif; ?>                </td>            </tr>            <?php        }    }    public function selectVersionSql($artist, $cancion) {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE artist_name ='{$artist}' and name='$cancion'");        return $listado->fetchall(PDO::FETCH_ASSOC);    }    public function getTipeVersion($cancion, $artista, $tipo) {        $listado = $this->_db->query("SELECT demo FROM tb_tracks WHERE (artist_name ='{$artista}' and name='{$cancion}') and tipo='{$tipo}' LIMIT 1");        return $listado->fetchall(PDO::FETCH_ASSOC);    }    public function getContentType($cancion, $artista) {        $listado = $this->_db->query("SELECT tipo FROM tb_tracks WHERE (artist_name ='{$artista}' and name='{$cancion}') ORDER BY tipo ASC");        return $listado->fetchall(PDO::FETCH_ASSOC);    }    public function getContentTypeFull($cancion, $artista, $tipo) {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE (artist_name ='{$artista}' and name='{$cancion}') and tipo != '{$tipo}' ORDER BY tipo ASC");        return $listado->fetchall(PDO::FETCH_ASSOC);    }    public function getContentTypeDemo($demo) {        $listado = $this->_db->query("SELECT * FROM tb_tracks WHERE demo='{$demo}' and tipo !='' ORDER BY tipo ASC");        return $listado->fetchall(PDO::FETCH_ASSOC);    }    public function getArtistas() {        $listado = $this->_db->query("SELECT DISTINCT artist_name FROM tb_tracks ORDER BY artist_name ASC");        return $listado->fetchall();    }    public function getType($type, $img = false, $param = null) {        $datos = array(            "GT" => "gt.png",            "WV" => "nv.png",            "BS" => "bass.png"        );        if (is_array($param)) {            $params;            foreach ($param as $key => $value) {                $params .= $key . "='" . $value . "' ";            }        }        if (array_key_exists($type, $datos)) {            if ($img) {                return "<img src='" . BASE_URL_IMG . "" . $datos[$type] . "' $params>";            } else {                return $datos[$type];            }        } else {            return;        }    }    public function GetTypeText($type) {        $datos = array(            "GT" => "no guitars (gt)",            "WV" => "WB/vocals (wbv)",            "BS" => "no bass (bs)",            "FV" => "full version (fv)",            "" => "full version (fv)",        );        if (array_key_exists($type, $datos)) {            return $datos[$type];        } else {            return $type;        }    }    public function getScrollAjax($start, $num, $WHERE = false, $ORDER = false, $data = null) {        if ($ORDER == false) {            $ORDER = "artist_name ASC";        } else {            $ORDER = $ORDER;        }        $listado = $this->_db->query("SELECT * FROM tb_tracks $WHERE ORDER BY $ORDER LIMIT $start, $num");        $datos = $listado->fetchall();        $this->GetTabla($datos, 20, $data);    }    public function getScrollAjaxJS($start, $num, $WHERE = false, $ORDER = false, $data = null) {        if ($ORDER == false) {            $ORDER = "artist_name ASC";        } else {            $ORDER = $ORDER;        }        if ($WHERE == false) {            $WHERE = null;        }        $listado = $this->_db->query("SELECT * FROM tb_tracks $WHERE ORDER BY $ORDER LIMIT $start, $num");        $datos = $listado->fetchall();        foreach ($datos as $key => $value):            $datosCarrito = array("id" => $value['id'], "precio" => $value['precio']);            $datosCarrito = json_encode($datosCarrito);            if ($data) {                $datetime1 = date_create($value['fecha_alta']);                $datetime2 = date_create(date("Y-m-d H:i:s"));                $interval = date_diff($datetime1, $datetime2);                $dias = $interval->format('%R%a');                if ($dias > 90) {                    $data = "<span class='etiqueta'>NEW</span>";                } else {                    $data = null;                }            }            ?>            <tr>                <td><i onclick="play('<?php echo $value['demo']; ?>', this);" class="fa fa-play-circle fa-2x"></i></td>                <td><a href="<?php echo $_layoutParams['root']; ?>backing-tracks-download/"><?= $value['name']; ?><?= $data; ?></a></td>                <td><a href="<?php echo $_layoutParams['root']; ?>artist"><?= $value['artist_name']; ?></a></td>                <td style="vertical-align: bottom;"><?= $this->getType($value['tipo'], true); ?></td>                <td>                    <a href="javascript:void(0);" class="buybtn" data-carrito='<?= $datosCarrito; ?>'>                        <span class="buybtn-text">Add to cart</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <!--<span class="buybtn-hidden-text">3.99 &euro;</span>-->                        <span class="buybtn-image buybtn-image-text"><span>2.49&euro;</span></span>                    </a>                </td>            </tr>            <?php        endforeach;    }    public function getURL($str) {//Quitar tildes y ñ        $tildes = array('á', 'é', 'í', 'ó', 'ú', 'ñ', 'Á', 'É', 'Í', 'Ó', 'Ú', 'Ñ');        $vocales = array('a', 'e', 'i', 'o', 'u', 'n', 'A', 'E', 'I', 'O', 'U', 'N');        $str = str_replace($tildes, $vocales, $str);//Quitar símbolos        $simbolos = array("=", "¿", "?", "¡", "!", "'", "%", "$", "€", "(", ")", "[", "]", "{", "}", "*", "+", "·", ".", "&lt; ", "&gt;");        $i = 0;        while ($simbolos[$i]) {            $str = str_replace($simbolos[$i], "", $str);            $i++;        }//Quitar espacios        $str = str_replace(" ", "_", $str);//Pasar a minúsculas        $str = strtolower($str);        return $str;    }    public function abecedario() {        ?>        <style>            #listadoCanciones #result_song table tr:hover {                background: white !important;            }            #listadoCanciones #abecedario table tr:hover {                background: white !important;            }            #listadoCanciones #abecedario table tr:hover  a{                background: white !important;                color: black;            }            #listadoCanciones #abecedario table td a:hover {                color: black !important;            }            #listadoCanciones #abecedario tr:hover td a, #listadoCanciones #abecedario tr:hover td a            {                color: black !important;            }        </style>        <?php        echo "<table id='abecedario' class='abecedario' border='0' bgcolor='#FFCC00'>                 <tr>                    <td>";        for ($L2 = "A"; $L2 <= "Z"; $L2++) {            echo "<a class=link2 href=#$L2>$L2</a>&nbsp;-&nbsp;";            if ($L2 == "Z") {                echo "";                break;            }        }        for ($N2 = 0; $N2 < 10; $N2++) {            echo "<a class=link2 href=#$N2>$N2</a>";            if ($N2 == 9) {                echo "";//exit;            } else {                echo "&nbsp;-&nbsp;";            }        }        echo "</td>			</tr>		   </table>";    }    public function getLeyenda() {        return "<img src=\"" . get_template_directory_uri() . "/images/nv.png\" width=40 height=27 align=absmiddle /> Without backing vocals <img src=\"" . get_template_directory_uri() . "/images/gt.png\" width=40 height=27 align=absmiddle /> Without Guitar <img src=\"" . get_template_directory_uri() . "/images/bass.png\" width=40 height=27 align=absmiddle /> Without Bass<br><br>";    }    public function getListAbecedario($abc = false) {        for ($AZ = "A"; $AZ <= "Z"; $AZ++) {//Abecedario horizontal y link            $style = "";            echo "<div>";            $style = "position: absolute;padding: 4px;margin: -6px 0 0 11px;";            echo "<font style='font-family: verdana;font-weigth: bold;font-size: 26px;$style border: 1px solid #36ACE7;'><a name=$AZ>" . $AZ . "</a></font>";            $abc = $this->abecedario();            echo "<hr noshade=\"noshade\"/>";            echo "</div>";            $list = $this->getArtistasAbcd($AZ);            foreach ($list as $key => $post):                $name = str_replace(" ", "-", $post['name']);                $artist = str_replace(" ", "-", $post['artist_name']);                ?>                <li>                    <a class="link1" href="<?= BASE_URL . "artist/query/" . $artist . "/" ?>">                        <?= "<b>" . $post['artist_name'] . "</b>"; ?>                    </a>                    <a class="link1" href="<?= BASE_URL . "search/query/" . $name . "/" ?>">                        <?= "- " . $post['name']; ?>                    </a>                </li>            <?php endforeach; ?>            <?php            echo "<hr noshade=\"noshade\"/>";            if ($AZ == "Z")                break;        }        for ($CN = 0; $CN < 10; $CN++) {//Abecedario horizontal y link            $style = "";            echo "<div>";            if ($AZ != "A") {                $style = "position: absolute;padding: 4px;margin: -6px 0 0 11px;";            }            echo "<font style='font-family: verdana;font-weigth: bold;font-size: 26px;$style border: 1px solid #36ACE7;'><a name=$CN>" . $CN . "</a></font>";            $abc = $this->abecedario();            echo "<hr noshade=\"noshade\"/>";            echo "</div>";            $list = $this->getArtistasAbcd($CN);            foreach ($list as $key => $post):                ?>                <li><a class="link1" href=""><?= "<b>" . $post['artist_name'] . "</b> - " . $post['name']; ?></a> <?php echo $this->getType($post['tipo'], true, array("width" => "30px", "height" => "23px")); ?> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>            <?php endforeach; ?>            <?php        }    }    public function getSearch() {        $search = trim($_GET['valor']);        $resultado = $this->_db->query("SELECT * FROM tb_tracks WHERE (artist_name LIKE '%$search%' OR name LIKE '%$search%') && tipo ='' ORDER BY artist_name ASC LIMIT 10");        $datos = $resultado->fetchall();        if (count($datos) == 0) {            ?>            <?php        } else {            echo "<ul>";            foreach ($datos as $key => $value) :                $name = str_replace(" ", "-", $value['name']);                $artist = str_replace(" ", "-", $value['artist_name']);                ?>                <li>                    <div class="search-list">                        <div class="search-list-top"><a data-search_track='<?= $value['name']; ?>' style="color: white;" href="<?= BASE_URL . "search/query/" . $name . "/"; ?>"><?= str_ireplace($search, "<span style='color: #FF7800;'>$search</span>", $value['name']); ?></a></div>                        <div class="search-list-bottom"><a style="color: white;" href="<?= BASE_URL . "artist/query/$artist/" ?>"><?= str_ireplace($search, "<span style='color: #FF7800;'>$search</span>", $value['artist_name']); ?></a></div>                    </div>                </li>                <?php            endforeach;        }        echo "</ul>";    }    /* FUNCTIONS */    public function repeatedElements($array, $returnWithNonRepeatedItems = false) {        $repeated = array();        foreach ((array) $array as $value) {            $inArray = false;            foreach ($repeated as $i => $rItem) {                if ($rItem['value'] === $value) {                    $inArray = true;                    ++$repeated[$i]['count'];                }            }            if (false === $inArray) {                $i = count($repeated);                $repeated[$i] = array();                $repeated[$i]['value'] = $value;                $repeated[$i]['count'] = 1;            }        }        if (!$returnWithNonRepeatedItems) {            foreach ($repeated as $i => $rItem) {                if ($rItem['count'] === 1) {                    unset($repeated[$i]);                }            }        }        sort($repeated);        return $repeated;    }    public function aasort(&$array, $key) {        $sorter = array();        $ret = array();        reset($array);        foreach ($array as $ii => $va) {            $sorter[$ii] = $va[$key];        }        asort($sorter);        foreach ($sorter as $ii => $va) {            $ret[$ii] = $array[$ii];        }        $array = $ret;    }    public function contarValoresArray($array) {        $contar = array();        foreach ($array as $value) {            if (isset($contar[$value])) {// si ya existe, le añadimos uno                $contar[$value]+=1;            } else {// si no existe lo añadimos al array                $contar[$value] = 1;            }        }        return $contar;    }    public static $_error;    public function Paginador($get, $pages = "search/query/", array $LIKE = null) {        if ($get == null) {            $WHERE = "WHERE tipo=''";        } else {            if ($LIKE == NULL) {                $WHERE = 'WHERE (artist_name LIKE "%' . $get . '%" OR name LIKE "%' . $get . '%") and tipo=""';            } else {                $WHERE = 'WHERE name=' . $LIKE['name'] . ' and artist_name=' . $LIKE['artist_name'] . ' and tipo=' . $LIKE['tipo'] . '';            }        }        $resultado = $this->_db->query('SELECT * FROM tb_tracks ' . $WHERE);        $countRegis = $resultado->fetchall(PDO::FETCH_ASSOC);        $num_registros = count($countRegis);//create new object pass in number of pages and identifier        $pages = new Paginator('20', 'page', $pages);//pass number of records to        $pages->set_total($num_registros);        $data = $this->_db->query('SELECT * FROM tb_tracks ' . $WHERE . ' ORDER BY artist_name ASC ' . $pages->get_limit());        $data = $data->fetchall(PDO::FETCH_ASSOC);        if ($num_registros == 0) {            echo "<div style='width: 60%;margin: auto;'><span style='color:red'>UPS! IT SEAMS WE DON'T HAVE THAT SONG… but if you want to have it, and you can’t find it over there, we can make it from scratch, send us an email now  <div style='width: 94px;margin: 22px auto;'><a class='btn btn-info' href='mailto:superbackingtracks@gmail.com?subject=Custom%20Tracks'>Click here</a></span></div></div>";            ?>            <?php        } else {            ?>            <table cellpadding="0" cellspacing="0" border="0" class="display data_table">                <thead>                    <tr>                        <th width="55px">DEMO</th>                        <th width="150px">NAME</th>                        <th>ARTIST</th>                        <th width="79px" class="hover-cursor" data-toggle="modal" data-target="#myModal">VERSION <i class="fa fa-question-circle"></i></th>                        <!--<th width="55px">PITCH</th>-->                        <th width="95px" style="text-align: center;"></th>                        <th width='18px'></th>                    </tr>                </thead>                <tbody id="fbody">                    <?php                    $this->GetTabla($data);                    ?>                </tbody>            </table>            <?php        }//create the page links        $this->LinksPagination = $pages->page_links('/', null, $get);    }    public function StylesPaginador() {        ?>        <style>            /*                        ul.pagination {                                        display: inline-block;                                        padding: 0;                                        margin: 0;                                    }                                                ul.pagination li {display: inline;}                                                ul.pagination li a {                                        color: black;                                        float: left;                                        padding: 8px 16px;                                        text-decoration: none;                                    }                                    ul.pagination li a.active {                                        background: -webkit-linear-gradient(top, #ff8400 0%, #ff6600 100%);                                        color: white;                                    }                                                ul.pagination li a:hover:not(.active) {background-color: #278dbc;color:white;}                                    ul.pagination li a {                                        border-radius: 5px;                                    }                                                ul.pagination li a.active {                                        border-radius: 5px;                                    }                                    ul.pagination li a {                                        transition: background-color .3s;                                    }                                    ul.pagination li a {                                        border: 1px solid #ddd;  Gray                                     }                                    .pagination li:first-child a {                                        border-top-left-radius: 5px;                                        border-bottom-left-radius: 5px;                                    }                                                ul.pagination li:last-child a {                                        border-top-right-radius: 5px;                                        border-bottom-right-radius: 5px;                                    }                                    ul.pagination li a {                                        margin: 0 4px;  0 is for top and bottom. Feel free to change it                                     }*/            .pagination {                clear: both;                padding: 0;            }            .pagination li {                display:inline;            }            .pagination a{                border: 1px solid #D5D5D5;                color: #FF7A00;                font-size: 13px;                font-weight: bold;                height: 25px;                padding: 4px 8px;                text-decoration: none;                margin: 2px;            }            .pagination a:hover, .pagination a:active {                background: rgba(39, 141, 188, 0.56);                color: white;            }            .pagination span.current {                background-color: #FF7A00;                border: 1px solid #D5D5D5;                color: #ffffff;                font-size: 15px;                font-weight: bold;                height: 25px;                padding: 8px 12px;                text-decoration: none;                margin: 2px;            }            .pagination span.disabled {                border: 1px solid #EEEEEE;                color: #DDDDDD;                margin: 2px;                padding: 2px 5px;            }        </style>        <?php    }    /* HTML */    public function HTML_Buscador() {        ?>        <div id="search">            <label>Search: </label>            <input type="search" class="form-controller" placeholder="Find that song you're looking for...">            <div id="results_search"></div>        </div>        <?php    }    public function InsertEmail($email) {        $this->_db->prepare("INSERT INTO tb_emaildatabase VALUES(null,:email,now())")                ->execute(                        array(                            ":email" => $email,                        )        );    }    /**     *      * @return string     */    public function GetCarritoLocalStorage() {        ?>        <?php        return '<script>document.write(localStorage.getItem("carrito"));</script>';    }    /* Paypal */    public function GetCarritoSession() {        return $_SESSION['carrito'];    }    public function PrecioTotalCarrito($datos_array) {        $precio = 0;        for ($i = 0; $i < count($datos_array->cart); $i++) {            $precio += $datos_array->cart[$i]->precio;            foreach ($datos_array->cart[$i]->version as $key => $value) {                $precio += $value->precio;            }        }        return $precio;    }    public function ArticulosCarrito($datos_array) {        for ($i = 0; $i < count($datos_array->cart); $i++) {            $datos = $this->GetCheckoutDemo($datos_array->cart[$i]->MP3Demo);            ?>            <input type="hidden" name="item_name" value="<?= $datos[0]['name']; ?>">            <?php        }    }}?><?php/* * PHP Pagination Class * * @author Rafa Gonzalez- rafael.gonzalez.1737@gmail.com - http://www.interactivesweb.com * @version 1.0 * @date enero 30, 2016 */class Paginator {    /**     * set the number of items per page.     *     * @var numeric     */    private $_perPage;    /**     * set get parameter for fetching the page number     *     * @var string     */    private $_instance;    /**     * sets the page number.     *     * @var numeric     */    private $_page;    /**     * set the limit for the data source     *     * @var string     */    private $_limit;    /**     * set the total number of records/items.     *     * @var numeric     */    private $_totalRows = 0;    private $_pages = "";    /**     *  __construct     *       *  pass values when class is istantiated      *       * @param numeric  $_perPage  sets the number of iteems per page     * @param numeric  $_instance sets the instance for the GET parameter     */    public function __construct($perPage, $instance, $pages) {        $this->_instance = $instance;        $this->_perPage = $perPage;        $this->_pages = $pages;        $this->set_instance();    }    /**     * get_start     *     * creates the starting point for limiting the dataset     * @return numeric     */    public function get_start() {        return ($this->_page * $this->_perPage) - $this->_perPage;    }    /**     * set_instance     *      * sets the instance parameter, if numeric value is 0 then set to 1     *     * @var numeric     */    private function set_instance() {        $this->_page = $_GET['page'];//        $this->_page = (int) (!isset($_GET[$this->_instance]) ? 1 : $_GET[$this->_instance]);        $this->_page = ($this->_page == 0 ? 1 : $this->_page);    }    /**     * set_total     *     * collect a numberic value and assigns it to the totalRows     *     * @var numeric     */    public function set_total($_totalRows) {        $this->_totalRows = $_totalRows;    }    /**     * get_limit     *     * returns the limit for the data source, calling the get_start method and passing in the number of items perp page     *      * @return string     */    public function get_limit() {        return "LIMIT " . $this->get_start() . ",$this->_perPage";    }    /**     * page_links     *     * create the html links for navigating through the dataset     *      * @var sting $path optionally set the path for the link     * @var sting $ext optionally pass in extra parameters to the GET     * @return string returns the html menu     */    public function page_links($path = '?', $ext = null, $data = null) {        if ($data == "") {            $data = null;        } else {            $data = $data . "/";        }        if ($path == "/") {            $path = BASE_URL . $this->_pages . $data;        }        $adjacents = "2";        $prev = $this->_page - 1;        $next = $this->_page + 1;        $lastpage = ceil($this->_totalRows / $this->_perPage);        $lpm1 = $lastpage - 1;        $pagination = "";        if ($lastpage > 1) {            $pagination .= "<ul class='pagination'>";            if ($this->_page > 1)                $pagination.= "<li><a href='" . $path . "$prev" . "$ext/'>Previous</a></li>";            else                $pagination.= "<span class='disabled'>Previous</span>";            if ($lastpage < 7 + ($adjacents * 2)) {                for ($counter = 1; $counter <= $lastpage; $counter++) {                    if ($counter == $this->_page)                        $pagination.= "<li><span class='current'>$counter</span></li>";                    else                        $pagination.= "<li><a href='" . $path . "$counter" . "$ext/'>$counter</a></li>";                }            }            elseif ($lastpage > 5 + ($adjacents * 2)) {                if ($this->_page < 1 + ($adjacents * 2)) {                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++) {                        if ($counter == $this->_page)                            $pagination.= "<li><span class='current'>$counter</span></li>";                        else                            $pagination.= "<li><a href='" . $path . "$counter" . "$ext/'>$counter</a></li>";                    }                    $pagination.= "...";                    $pagination.= "<li><a href='" . $path . "$lpm1" . "$ext/'>$lpm1</a></li>";                    $pagination.= "<li><a href='" . $path . "$lastpage" . "$ext/'>$lastpage</a></li>";                }                elseif ($lastpage - ($adjacents * 2) > $this->_page && $this->_page > ($adjacents * 2)) {                    $pagination.= "<li><a href='" . $path . "1" . "$ext/'>1</a></li>";                    $pagination.= "<li><a href='" . $path . "2" . "$ext/'>2</a></li>";                    $pagination.= "...";                    for ($counter = $this->_page - $adjacents; $counter <= $this->_page + $adjacents; $counter++) {                        if ($counter == $this->_page)                            $pagination.= "<span class='current'>$counter</span>";                        else                            $pagination.= "<li><a href='" . $path . "$counter" . "$ext/'>$counter</a></li>";                    }                    $pagination.= "..";                    $pagination.= "<li><a href='" . $path . "$lpm1" . "$ext/'>$lpm1</a></li>";                    $pagination.= "<li><a href='" . $path . "$lastpage" . "$ext/'>$lastpage</a></li>";                }                else {                    $pagination.= "<li><a href='" . $path . "1" . "$ext/'>1</a></li>";                    $pagination.= "<li><a href='" . $path . "2" . "$ext/'>2</a></li>";                    $pagination.= "..";                    for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++) {                        if ($counter == $this->_page)                            $pagination.= "<span class='current'>$counter</span>";                        else                            $pagination.= "<li><a href='" . $path . "$counter" . "$ext/'>$counter</a></li>";                    }                }            }            if ($this->_page < $counter - 1)                $pagination.= "<li><a href='" . $path . "$next" . "$ext/'>Next</a></li>";            else                $pagination.= "<li><span class='disabled'>Next</span></li>";            $pagination.= "</ul>\n";        }        return $pagination;    }}